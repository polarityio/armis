{{!-- 
TODO: CYYNC Integration Template Structure
Based on assembleLookupResults.js data organization and CYYNC Partner API response structures

CURRENT DATA STRUCTURE FROM ASSEMBLYLOOKUPRESULTS:
entity.data = {
  summary: ['Assets: 2', 'Forms: 1', 'High Risk: 1', 'Recent: 1'],
  details: {
    assets: { count: 2, items: [...], summary: {...} },
    forms: { count: 1, items: [...], summary: {...} },
    pages: { count: 0, items: [...], summary: {...} },
    tasks: { count: 1, items: [...], summary: {...} },
    _metadata: { totalResults: 4, searchScopes: [...], resultTypes: [...], workspaces: [...] }
  }
}

REQUIRED TEMPLATE STRUCTURE:
1. Summary Tags Display (horizontal pills)
2. Tab Navigation (Assets, Forms, Pages, Tasks)
3. Tab Content Areas (results for each type)
4. Empty State Handling (when no results for a type)
5. Workspace Context Display
6. CYYNC-specific field rendering
--}}

{{!-- TODO: Replace current structure with CYYNC tab-based layout --}}
<div class="cyync-results">
  {{!-- TODO: Summary Tags Section --}}
  {{!-- Display summary array as horizontal pills showing counts and key metrics --}}
  {{!-- Example: "Assets: 2", "Forms: 1", "High Risk: 1", "Recent: 1" --}}
  <div class="summary-tags">
    {{!-- TODO: Loop through block.data.summary array --}}
    {{!-- Create styled tag pills for each summary item --}}
  </div>

  {{!-- TODO: Tab Navigation --}}
  {{!-- Create tabs for each result type from details object --}}
  {{!-- Tabs should show: Assets (count), Forms (count), Pages (count), Tasks (count) --}}
  <div class="result-tabs">
    {{!-- TODO: Implement active tab state management --}}
    {{!-- TODO: Show counts from details.assets.count, details.forms.count, etc. --}}
    {{!-- TODO: Disable/style tabs with 0 results differently --}}
  </div>

  {{!-- TODO: Tab Content Areas --}}
  <div class="tab-content">
    
    {{!-- TODO: Assets Tab Content --}}
    {{!-- CYYNC Assets Structure from Partner API:
         {
           id: "uuid-string",
           object_type: "workspaceasset", 
           workspace: { id, title, description, icon, bg_color },
           type: { title, description, icon, bg_color, workflow: {...} },
           status: { title, state, description, icon, bg_color },
           title: "10.0.1.100",
           description: "<p>Database server showing suspicious activity</p>",
           priority: "2",
           tags: [],
           attributes: [{ key, value, display }],
           team: { id, title, description },
           created_by: { display_name, username, email },
           related: { comments, documents, forms, pages, tasks },
           createdAt, updatedAt
         }
    --}}
    <div class="assets-content">
      {{!-- TODO: Loop through block.data.details.assets.items --}}
      {{!-- TODO: Asset card layout with:
           - Workspace context (workspace.title with colored badge)
           - Asset title with link to CYYNC
           - Status badge with color from status.bg_color
           - Type badge with icon and color from type.bg_color
           - Priority indicator (priority field)
           - Attributes table (key-value pairs from attributes array)
           - Tags display (tags array)
           - Team assignment (team.title)
           - Created by info (created_by.display_name)
           - Related items counts (related.comments, related.documents, etc.)
           - Timestamps (createdAt, updatedAt with moment formatting)
      --}}
      {{!-- TODO: Risk score display from transformed asset data --}}
      {{!-- TODO: Asset-specific actions based on canAdd, canModify, canAssess flags --}}
    </div>

    {{!-- TODO: Forms Tab Content --}}
    {{!-- CYYNC Forms Structure from Partner API:
         {
           id: "form-uuid",
           object_type: "workspaceform",
           workspace: { id, title, description },
           type: { title, description, icon, bg_color },
           status: { title, state, description },
           title: "Malware Activity Report for 10.0.1.100",
           description: "<p>Suspicious process execution detected</p>",
           priority: "1", 
           tags: [{ name, color }],
           attributes: [{ key, value, display }],
           team: { id, title },
           created_by: { display_name, username },
           form_data: { affected_systems: [], detection_time, indicators: [] },
           related: { comments, documents, assets, tasks },
           createdAt, updatedAt
         }
    --}}
    <div class="forms-content">
      {{!-- TODO: Loop through block.data.details.forms.items --}}
      {{!-- TODO: Form card layout with:
           - Workspace context (workspace.title)
           - Form title with description
           - Status badge (status.title with state-based styling)
           - Type badge with icon (type.icon, type.bg_color)
           - Priority indicator with color coding
           - Tags with custom colors (tags array with color field)
           - Form data structured display (form_data object)
           - Attributes table (attributes array)
           - Team and author info
           - Related items counts
           - Timestamps
      --}}
      {{!-- TODO: Form-specific data rendering (affected_systems, indicators, etc.) --}}
      {{!-- TODO: Recent form highlighting from summary.recentForms --}}
    </div>

    {{!-- TODO: Pages Tab Content --}}
    {{!-- CYYNC Pages Structure (currently empty in API, but prepare for future):
         Similar structure to forms but page-specific fields
    --}}
    <div class="pages-content">
      {{!-- TODO: Handle empty state gracefully --}}
      {{!-- TODO: Prepare structure for future page data --}}
      {{!-- TODO: Page-specific field rendering when data becomes available --}}
    </div>

    {{!-- TODO: Tasks Tab Content --}}
    {{!-- CYYNC Tasks Structure (currently empty in API, but prepare for future):
         Similar structure to forms but task-specific fields like assignee, priority, etc.
    --}}
    <div class="tasks-content">
      {{!-- TODO: Handle empty state gracefully --}}
      {{!-- TODO: Task-specific field rendering when data becomes available --}}
      {{!-- TODO: Active task highlighting from summary.activeTasks --}}
      {{!-- TODO: Priority and status-based styling --}}
    </div>
  </div>

  {{!-- TODO: Metadata Section (Optional, expandable) --}}
  <div class="metadata-section">
    {{!-- TODO: Display metadata from block.data.details._metadata:
         - totalResults count
         - searchScopes used
         - resultTypes found
         - workspaces searched
    --}}
    {{!-- TODO: Make this an expandable section for debugging/admin use --}}
  </div>

  {{!-- TODO: Common Elements Needed:
       - CYYNC branding and colors
       - Consistent workspace badge styling  
       - Status and type badge components
       - Link generation to CYYNC interface
       - Icon rendering (FontAwesome icons from API)
       - Date/time formatting with timezone support
       - Priority level styling (1=High, 2=Medium, etc.)
       - Tag styling with custom colors
       - Related items count displays
       - Empty state handling for each tab
       - Loading states for tab switching
       - Expandable sections for detailed data
  --}}
</div>

{{!-- REMOVE: All current Armis-specific template code --}}
{{!-- The current template is designed for Armis devices and is not compatible with CYYNC data structures --}}